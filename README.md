# trackdayb


# 사이드 프로젝트 관련 블로그 게시글 링크.
https://velog.io/@blueskyi?tag=%EC%82%AC%EC%9D%B4%EB%93%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8


# 개미들의 곡소리

![Thumbnail](./src/images/Thumbnail.png)

## 🗂️ 목차

### 1. [프로젝트 소개](#-프로젝트-소개)

### 2. [팀 구성](#-팀-구성)

### 3. [기술 스텍 및 라이브러리](#-기술-스텍-및-라이브러리)

### 4. [주요 기능](#-주요-기능)

### 5. [Troubleshooting](#-Troubleshooting)

### 6. [유저 피드백 및 개선 사항](#-유저-피드백-및-개선-사항)

<hr>

## 📃 프로젝트 소개

개미들의 곡소리는 주식 투자에 대한 의견과 고민을 투표 형식으로 쉽고 간단하게 해결할 수 있는 커뮤니티 사이트 입니다. 주식 투자에 대한 관심이 높아짐에 따라 많은 개미 투자자들이 유입되었고, 이들의 고민을 부담 없이 간편하게 해결하는 데 도움이 되고자 프로젝트를 진행하게 되었습니다.

### 📆 개발 기간 : 2021년 10월 23일 ~ 2021년 12월 03일

### 홈페이지 [antsori](https://www.antsori.com/)

### 소개 영상 [youtube](https://www.youtube.com/watch?v=wD4DdZ-Sp0s)

### Github [Organizations](https://github.com/Ant-DDun-DDun-Project)

### Project 정보 [Notion](https://crawling-health-e0d.notion.site/Project-3b911ebdb6114fb7be4b54956a9579dd)

<hr>

## 🧑‍💻 팀 구성

[팀 소개 페이지](https://crawling-health-e0d.notion.site/be6df84bde484ca883f54739be96eb8f)

<table>
  <tr>
  <td colspan='2' align="center">
  Backend
  </td>
  <td colspan='2' align="center">
  Frontend
  </td>
  <td colspan='2' align="center">
  Designer
  </td>
  <tr>
  <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F56d2808d-73f7-47d9-b580-310b311774f0%2FUntitled.png?table=block&id=dae3a277-b892-4185-9dc1-2b9fd53605e9&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center" >
    <b>김정호</b></a><br>
    <a href="https://github.com/jeangho293">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4cd551ad-0c09-4ef8-8027-b9e3d47a79e8%2FUntitled.png?table=block&id=493a20f5-e908-4ef8-b07d-710d2f42f3f9&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>김갑민</b></a><br />
    <a href="https://github.com/gabmin" >Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd266d37c-2c38-4f03-b50f-c7908dabf868%2FUntitled.png?table=block&id=ebb3a525-c75c-4f30-974a-629f8818f109&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>김예은</b></a><br />
    </td>
    <tr>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2f229f59-5b48-4501-b9d8-44395fa066ab%2FUntitled.png?table=block&id=65bb4f7a-a244-4ba9-85e9-1886dc98432b&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>조윤재</b></a><br /> 
    <a href="https://github.com/Yunjaejo">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F651ce4da-3dd7-4845-8207-bcb564eb641d%2FUntitled.png?table=block&id=9973b5b1-8ec8-4d30-a7da-64d453e1da16&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>박시영</b></a><br /> 
    <a href="https://github.com/larisms">Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fcd2c4a8c-5a95-41e0-9053-9897e4c95a1b%2FUntitled.png?table=block&id=d4cdb94a-8915-455e-af65-6f98d33dc665&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>김한비</b></a><br /> 
    </td>
    </tr>
    <tr>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd36d536e-0432-4cb0-96ef-9a1c3a1889d5%2FUntitled.png?table=block&id=8b7efded-cc3e-45e9-a950-724957fe55cd&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>황창환</b></a><br /> 
    <a href="https://github.com/changchanghwang">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center"><img src="https://crawling-health-e0d.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F828d0f28-79c9-407a-83da-6ba55ce7fbe4%2FUntitled.png?table=block&id=3d63dc23-b006-47f5-8191-65e9cc1350d8&spaceId=e0735ea4-78ca-47db-be31-3e9c8641e938&width=260&userId=&cache=v2" width="60px;" alt=""/>
    </td>
    <td align="center">
    <b>장원배</b></a><br /> 
    <a href="https://github.com/calvin9150">Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td colspan='2'></td>
    </tr>
</table>

<hr>

## ⭐ 기술 스텍 및 라이브러리

- 개발언어: JavaScript
- 개발 라이브러리: React
- 상태관리 :
  - Redux : 데이터 전역 관리를 위한 위해 사용
  - Redux/toolkit : 기존 리덕스의 복잡함을 낮추고 사용성을 높여 협업 업무 능력 향상을 위해 사용
- 배포 :
  - AWS S3 : 서버리스 서비스를 통해 배포를 하기 위해 사용
  - AWS Cloudfront : HTTPS 적용을 위해 사용
- 통신 :
  - Axios: 서버 통신을 위해 사용
- 스타일 :
  - styled-components : 가독성 및 편의성을 위해 사용
- 테스트 :
  - Cypress : UI/UX 측면에서 기능 테스트를 위해 사용
- 라이브러리(패키지) :
  - React-Slick : Carousel 기능과 LazyLoad 기능을 통해 서버 효율성을 높이기 위해 사용
  - Moment : 시간 및 날짜 설정을 위해 사용

<hr>

## 🕹️ 주요 기능

### 로그인 / 회원가입

- JWT 토큰 방식으로 토큰을 발급받고 LocalStorage에 저장하여 사용한다.
- 영문 소문자, 숫자, 특수기호를 이용하여 아이디와 비밀번호를 설정할 수 있다.
- 닉네임을 입력할 수 있으며, 커뮤니티를 이용하는 모든 곳엔 닉네임만 노출된다.

### 찬반 / 객관식 인기글

- 투표 참여자 수가 가장 많은 게시글 10개를 슬릭 슬라이더 방식으로 순서대로 보여준다.
- 화면에 크기에 따라 최대 4개씩 게시글을 보여주고 넘길 수 있다.
- 원하는 게시물을 클릭하면 해당 게시물의 메인 뷰 혹은 상세페이지로 이동할 수 있다.

### 검색

- 검색어를 입력하면 검색어가 포함된 모든 게시글을 리스트 형식으로 보여준다.
- 최신순으로 정렬되어 내림차순으로 게시글을 보여준다.
- Pagination 기능을 추가하여 페이지당 최대 10개의 게시물을 보여준다.
- 원하는 게시물을 클릭하면 해당 게시물의 메인 뷰 혹은 상세페이지로 이동할 수 있다.

### 프로필 페이지

- 닉네임 변경 기능을 추가하여 아이디 중복검사 후 언제든지 닉네임을 변경할 수 있다.
- 자신이 작성한 글과 참여한 글을 리스트 형식으로 최신순, 내림차순으로 정렬되어 보여준다.
- Pagination 기능을 추가하여 페이지당 최대 10개의 게시물을 보여준다.
- 원하는 게시물을 클릭하면 해당 게시물의 메인 뷰 혹은 상세페이지로 이동할 수 있다.

### 찬반 투표

- 어떠한 이야기 혹은 고민에 대해 두 가지의 선택지 중 하나를 선택할 수 있다.
- 전체 게시물, 진행 중인 게시물, 종료된 게시물을 선택해서 볼 수 있다.
- 슬릭 슬라이더 방식과 리스트 방식 두 가지 형태가 존재하며, 원하는 방식으로 보고 이용할 수 있다.
- 리스트 형식은 Pagination 기능이 있어 페이지당 최대 5개의 게시물을 볼 수 있다.
- 하나의 선택지를 선택하면 즉시 투표 결과를 Progress Bar 형식으로 보여준다.
- 언제든지 재투표가 가능하며 그에 따라 투표 결과가 바로 반영된다.
- 작성자의 프로필을 클릭하면 해당 프로필 페이지로 이동할 수 있다.
- '좋아요' 기능이 존재하여 관심 있는 게시글에 한 번만 '좋아요'를 할 수 있다.

### 객관식 투표

- 어떠한 이야기 혹은 고민에 대해 최대 5개의 선택지 중 하나를 선택할 수 있다.
- 전체 게시물, 진행 중인 게시물, 종료된 게시물을 선택해서 볼 수 있다.
- 슬릭 슬라이더 방식과 리스트 방식 두 가지 형태가 존재하며, 원하는 방식으로 보고 이용할 수 있다.
- 리스트 형식은 Pagination 기능이 있어 페이지당 최대 5개의 게시물을 볼 수 있다.
- 하나의 게시물을 선택하면 상세페이지로 넘어가고 투표를 진행할 수 있다.
- 해당 게시물에 대해 댓글을 작성할 수 있으며 수정, 삭제, '좋아요' 가 가능하다.
- 다른 유저가 작성한 댓글에 대댓글을 작성할 수 있다.
- 댓글 리스트에 Pagination 기능이 있어 페이지당 최대 5개의 댓글을 볼 수 있다.
- 작성자의 프로필을 클릭하면 해당 프로필 페이지로 이동할 수 있다.
- '좋아요' 기능이 존재하여 관심 있는 게시글에 한 번만 '좋아요'를 할 수 있다.

<hr>

## 🙉 Troubleshooting

### 1. 하위 컴포넌트의 이벤트로 상위 컴포넌트의 state 변경 문제

- 상위 컴포넌트에 이벤트를 생성하여 Prop로 전달하는 방법 -> driling 이슈 발생

```jsx
const [state, setState] = useState(false);

const render = temp => {
  setState(temp);
};
```

- history로 props를 전달하고, uselocation을 활용하여 데이터를 전달하는 방법  
  -> 변경이 필요한 데이터의 관리가 어렵고, 컴포넌트 구조가 복잡해짐에 따라 사용이 제한적

```jsx
const goToMulti = () => {
  history.push({
    pathname: "/multi",
    state: { multiId: multiId },
  });
};
```

- **모든 페이지의 paramsId를 Redux Store에 저장하여 필요시 사용하는 방법울 사용하여 해결**

```jsx
const paramsSlice = createSlice({
  name: "params",
  initialState,
  reducers: {
    SetParams: (state, action) => {
      state.paramsId = action.payload;
    },
  },
});
```

```jsx
useEffect(() => {
  dispatch(DetailDB(multiId));
  dispatch(SetParams(multiId));
}, [dispatch, multiId]);
```

### 2. state에 따라 CSS가 달라 지는 버튼의 코드 가독성 저하 문제

- 여러 가지 상황에 따라 CSS가 바뀌어 반복되는 코드로 인해 코드량이 많아지고 가독성이 떨어지게 됨.
- **함수를 활용하여 코드량을 줄이고 가독성을 높힘.**

```jsx
const SelctButtonA = (BGcolor, color, disabled, vote, content) => {
  return (
    <EitherButtonA
      style={{ backgroundColor: BGcolor, color: color }}
      disabled={disabled}
      onClick={() => {
        onClickContent(vote);
        setShowGraph(!userNickname ? false : true);
      }}
      className="buttonA"
    >
      <ButtonText>{content}</ButtonText>
    </EitherButtonA>
  );
};
```

### 3. 비동기 통신으로 인해 새로고침을 할 경우 데이터가 없어 오류 발생

- 새로 고침시 비동기 통신으로 데이터가 넘어오기 전에 데이터가 없는 상태로 렌더링 되어 오류가 발생함.
- **단축평가를 활용하여 데이터가 있을 경우 렌더링 되도록 하였음.**

```jsx
const { multiPost } = useSelector(state => state.multiCard);
const cardList = multiPost && multiPost.multi;
```

- **Redux Toolkit의 기능 활용**  
  -> PostDBDone이 True가 됐을 경우에만 데이터가 전달됨

```jsx
.addCase(PostDB.pending, state => {
  state.PostDBLoading = true;
  state.PostDBDone = false;
  state.PostDBError = null;
  })
.addCase(PostDB.fulfilled, (state, action) => {
  state.PostDBLoading = false;
  state.PostDBDone = true;
  state.eitherPost = action.payload;
  })
.addCase(PostDB.rejected, (state, action) => {
  state.PostDBLoading = false;
  state.PostDBError = action.error;
  })
```

```jsx
<SlickLayout>
  {PostDBDone && status === "Post" ? <EitherSlick PostList={PostList} /> : null}
</SlickLayout>
```

### 4. 컨포넌트의 데이터 전달 방식에 대한 고민

- [개선 사항](#개선-사항) 2번째 사항에 대한 고민으로 소량의 데이터 전달을 위해 Redux를 구성하는 게 비효율적이라고 생각함.
- **History를 통해 작성하기 페이지로 이동 시 Props 데이터를 넘겨줌으로써 코드를 간소화함.**

```jsx
const [select, setSelect] = useState("checkMulti");

const goToWrite = () => {
  if (!userNickname) {
    window.alert("로그인 후 이용 가능합니다");
    history.replace("/login");
  } else {
    window.scroll(0, 0);
    history.push({
      pathname: "/write",
      state: { select: select },
    });
  }
};
```

<hr>

## 🔧 유저 피드백 및 개선 사항

### 피드백 정리 [Notion](https://crawling-health-e0d.notion.site/1e6a76553d3b45909c134d9b62b604fd)

1. 자체 피드백
2. 1차 유저 피드백 (지인) 21/11/15 ~ 21/11/22
3. 2차 유저 피드백 (각종 커뮤니티) 21/11/27 ~ 21/11/30

## 개선 사항

- Slick Slider 형식은 여러 게시물을 한눈에 보기가 어렵다는 의견이 있어 List 형식으로 볼 수 있게 함.

![](https://blog.kakaocdn.net/dn/bJT7vW/btrmEEvFIy8/YoMX7WqcqRtK4ncXSahQAK/img.gif)

- 보고 있는 찬반 투표, 객관식 투표 페이지에 따라 작성하기의 형식이 바뀌어 적용되도록 함.

![](https://blog.kakaocdn.net/dn/bRL3nF/btrmGgumZxZ/XOzVTdCdwkWli6E1IRpUhK/img.gif)

- 메인페이지의 인기 글을 클릭 후 페이지 이동 시 해당 게시글을 바로 볼 수 있도록 함.

![](https://blog.kakaocdn.net/dn/bSly0e/btrmEdkOyFS/JTOqZmzEmKid2WBkheC6kK/img.gif)

- 선택한 Slider 형식과 List 형식이 유지되도록 함.

![](https://blog.kakaocdn.net/dn/XSJwo/btrmEkjDwCo/ZUcaoPv8rCeKGYgv2Hqjzk/img.gif)

- 객관식 투표 List 형식에서 상세페이지 이동 후 뒤로 가기 시 해당 게시글이 위에 오도록 함.

![](https://blog.kakaocdn.net/dn/qp94l/btrmK8V2MNh/8Pkqks7gCKx1KCTxhdIhJ1/img.gif)

- 찬반 투표 Slick Slider의 양쪽 게시물의 투표 버튼 클릭 시 투표가 적용되는 문제를 해결함.

![](https://blog.kakaocdn.net/dn/eDzuQn/btrmHFglfjB/6DHTUb0ieRmmly3KQ1Bk80/img.gif)
